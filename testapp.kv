#:kivy 1.10.1

#:import Window kivy.core.window.Window

# Screen with list of scripts to select from
<MenuScreen>:
    BoxLayout:
        id: menu_container
        orientation: "vertical" 

        BoxLayout:
            size_hint: (None, None)
            size: (Window.width, 0.2*Window.height)
            orientation: 'vertical'
            BoxLayout:
                orientation: 'horizontal'
                size_hint: (1, None)
                height: 0.1*Window.height
                Button:
                    id: infoButton
                    text: 'I'
                    background_color: [1, 0, 0, 1]
                Button:
                    disabled: True
                    text: 'L I N E !'
                Button:
                    text: 'Settings'
                    id: settingsButton
            Label:
                text: 'Click the play you want to rehearse!'

        ScrollView:
            id: scrollBox
            GridLayout:
                id: playMenu
                cols: 1
                size_hint: (None, None)
                width: Window.width

# Screen with main functionality 
<RehearseScreen>:
    charMenu: charMenu.__self__
    actSceneMenu: actSceneMenu.__self__
    buttonContainer: buttonContainer.__self__
    BoxLayout:
        id: totalContainer
        orientation: "vertical"

        BoxLayout:
            orientation: 'vertical'
            BoxLayout:
                orientation: 'horizontal'
                Button:
                    id: scriptMenuButton
                    text: 'Script Menu'
                    on_press: root.manager.current = "menu"
                    height: 0.1*Window.height
                Button:
                    disabled: True
                    text: 'L I N E !'
                    height: 0.1*Window.height
                Button:
                    text: 'Settings'
                    id: settingsButton
                    height: 0.1*Window.height
            BoxLayout:
                orientation: 'horizontal'
                Button:
                    id: charButton
                    on_release: charMenu.open(self)
                    size_hint: (None, None)
                    size: ((1/3)*Window.width, 0.05*Window.height)
                    text: 'Character'
                    DropDown:
                        id: charMenu
                        size_hint: (None, None) 
                Button:
                    id: actSceneButton
                    on_release: actSceneMenu.open(self)
                    size_hint: (None, None)
                    size: ((1/3)*Window.width, 0.05*Window.height)
                    text: 'Act #, Scene #' 
                    DropDown:
                        id: actSceneMenu
                        size_hint: (None, None)
                TextInput:
                    id: searchLine
                    size_hint: (None, None)
                    size: ((1/3)*Window.width, 0.05*Window.height)
                    hint_text: 'Search for a line' 
                    multiline: False

        BoxLayout:
            id: rehearseContainer
            orientation: 'vertical'  
            size_hint: (None, None)
            size: (Window.width, 0.8*Window.height)      
            BoxLayout:
                id: buttonContainer
                orientation: 'vertical'
                size_hint: (None, None)
                size: (Window.width, 0.7*Window.height)
                pos_hint: {'top': 0.8}
                ScrollView:
                    id: lineButtonScroll
                    size_hint: (None, None)
                    size: (Window.width, 0.6*Window.height)
                    Button:
                        id: lineButton
                        text: 'Start Rehearsing!'
                        size_hint: (None, None)
                        height: self.texture_size[1] + abs(0.6*Window.height - self.texture_size[1])
                        width: Window.width
                        #pos_hint: {'top': 1}
                Button:
                    id: promptButton
                    text: 'Prompt Me!' 
                    size_hint: (None, None)
                    size: (root.width, 0.1*root.height)
	            BoxLayout:
	                id: bottomMenu
	                orientation: 'horizontal'
	                size_hint: (None, None)
	                size: (Window.width, 0.1*Window.height)
	                pos_hint: {'top': 0.1}
	                Button:
	                    id: rehearseButton
	                    text: 'Rehearse'
	                    size_hint: (None, None)
	                    size: (0.5*Window.width, 0.1*Window.height)
	                Button:
	                    id: recordButton
	                    text: 'Record'
	                    size_hint: (None, None)
	                    size: (0.5*Window.width, 0.1*Window.height)    

# 
<RecordScreen>:
    charMenu: charMenu.__self__
    actSceneMenu: actSceneMenu.__self__
    buttonContainer: buttonContainer.__self__
    BoxLayout:
        id: totalContainer
        orientation: "vertical"
        BoxLayout:
            orientation: 'vertical'
            BoxLayout:
                orientation: 'horizontal'
                Button:
                    id: scriptMenuButton
                    text: 'Script Menu'
                    on_press: root.manager.current = "menu"
                    height: 0.1*Window.height
                Button:
                    disabled: True
                    text: 'L I N E !'
                    height: 0.1*Window.height
                Button:
                    text: 'Settings'
                    id: settingsButton
                    height: 0.1*Window.height
            BoxLayout:
                orientation: 'horizontal'
                Button:
                    id: charButton
                    on_release: charMenu.open(self)
                    size_hint: (None, None)
                    size: ((1/3)*Window.width, 0.05*Window.height)
                    text: 'Character'
                    DropDown:
                        id: charMenu
                        size_hint: (None, None) 
                Button:
                    id: actSceneButton
                    on_release: actSceneMenu.open(self)
                    size_hint: (None, None)
                    size: ((1/3)*Window.width, 0.05*Window.height)
                    text: 'Act #, Scene #' 
                    DropDown:
                        id: actSceneMenu
                        size_hint: (None, None)
                TextInput:
                    id: searchLine
                    size_hint: (None, None)
                    size: ((1/3)*Window.width, 0.05*Window.height)
                    hint_text: 'Search for a line' 
                    multiline: False

        BoxLayout:
            id: rehearseContainer
            orientation: 'vertical'  
            size_hint: (None, None)
            size: (Window.width, 0.8*Window.height)      
            BoxLayout:
                id: buttonContainer
                orientation: 'vertical'
                size_hint: (None, None)
                size: (Window.width, 0.7*Window.height)
                pos_hint: {'top': 0.8}
                ScrollView:
                    id: lineButtonScroll
                    size_hint: (None, None)
                    size: (Window.width, 0.7*Window.height)
                    pos_hint: {'top': 0.8}
                    GridLayout:
                        size_hint: (None, None)
                        size: (Window.width, 0.7*Window.height)
                        cols: 1
                        pos_hint: {'top': 0.8}
                        Button:
                            id: lineSearch
                            text: 'Search for Line'
                            size_hint: (None, None)
                            size: (Window.width, 0.15*Window.height)
                        Button:
                            id: characterLines
                            text: 'Record All for Selected Character'
                            size_hint: (None, None)
                            size: (Window.width, 0.15*Window.height)
                        Button:
                            id: cueLines
                            text: 'Record Cues for Selected Character'
                            size_hint: (None, None)
                            size: (Window.width, 0.15*Window.height)
                        Button:
                            id: cueLines
                            text: 'Record All Lines For Scene'
                            size_hint: (None, None)
                            size: (Window.width, 0.15*Window.height)
            BoxLayout:
                id: bottomMenu
                orientation: 'horizontal'
                size_hint: (None, None)
                size: (Window.width, 0.1*Window.height)
                pos_hint: {'top': 0.1}
                Button:
                    id: rehearseButton
                    text: 'Rehearse'
                    size_hint: (None, None)
                    size: (0.5*Window.width, 0.1*Window.height)
                Button:
                    id: recordButton
                    text: 'Record'
                    size_hint: (None, None)
                    size: (0.5*Window.width, 0.1*Window.height)

# Instructions and Information
<InfoScreen>:
    BoxLayout:
        id: totalContainer
        orientation: "vertical"
        BoxLayout:
            orientation: 'horizontal'
            Button:
                id: backButton
                text: 'Back'
                height: 0.1*Window.height
            Button:
                disabled: True
                text: 'L I N E !'
                height: 0.1*Window.height
            Button:
                text: 'Settings'
                id: settingsButton
                height: 0.1*Window.height
        Label:
            id: infoText
            text: "The LINE! App is designed to provide a virtual partner \nto help theater students or anyone who needs to \npractice memorizing a dialogue. You can select \nfrom a menu of scripts, then rehearse, with the app \nusing text-to-speech to speak your cue lines.\nSimply select the play you want to rehearse, select the \ncharacter you're practicing and click through the script."            

# Screen to adjust volume, speed, and set cues mode
<SettingsScreen>:
    BoxLayout:
        id: settingsContainer
        orientation: 'vertical'
        size_hint: (None, None)
        size: (Window.width, 0.5*Window.height)
        BoxLayout:
            orientation: 'horizontal'
            size_hint: (1, None)
            height: 0.1*Window.height
            Button:
                text: 'I'
                background_color: [1, 0, 0, 1]
            Button:
                disabled: True
                text: 'L I N E !'
            Button:
                text: 'Settings'
                id: settingsButton
        BoxLayout:
            orientation: 'vertical'
            size_hint: (1, None)
            height: 0.9*Window.height
            Label:
                text: 'Volume'
            Slider:
                id: volumeSlider
                min: 0
                max: 4
                value: 2
            Label:
                text: 'Speed'
            Slider:
                id: speedSlider
                min: 100
                max: 400
                value: 200
            Label:
                text: 'Cues Mode'
            Switch:
                id: cuesModeSwitch
                active: True
            Label:
                text: 'Cut Mode'
            Switch:
                id: cutModeSwitch
                active: False


<NextSceneLayout>:
    orientation: 'vertical'
    size_hint: (None, None)
    size:  (Window.width, 0.8*Window.height)
    Label:
        id: nextSceneLabel
        valign: 'middle'
        text: "You\'ve reached the end of your part for this scene."
    BoxLayout:
        id: nextSceneButtonLayout
        orientation: 'horizontal'
        padding: [0.15*Window.width, 0.1*Window.height, 0.15*Window.width, 0.05*Window.height]
        spacing: 0.2*Window.width
        Button:
            id: repeatSceneButton
            text: 'Rehearse this scene again.'
            size_hint: (None, None)
            size: (0.25*Window.width, 0.1*Window.height)
        Button:
            id: nextSceneButton
            text: 'Rehearse next scene.'
            size_hint: (None, None)
            size: (0.25*Window.width, 0.1*Window.height)

<SearchScreen>:
    BoxLayout:
        id: totalContainer
        orientation: "vertical"
        BoxLayout:
            orientation: 'horizontal'
            size_hint: (None, None)
            size: (Window.width, 0.1*Window.height)
            pos_hint: {'top': 1}
            Button:
                id: scriptMenuButton
                pos_hint: {'top': 1}
                text: 'Script Menu'
                on_press: root.manager.current = "menu"
                height: 0.1*Window.height
            Button:
                disabled: True
                pos_hint: {'top': 1}
                text: 'L I N E !'
                height: 0.1*Window.height
            Button:
                text: 'Settings'
                pos_hint: {'top': 1}
                id: settingsButton
                height: 0.1*Window.height
        BoxLayout:
            orientation: 'vertical'
            size_hint: (None, None)
            size: (Window.width, 0.9*Window.height)
            TextInput:
                id: searchBar
                multiline: False
                hint_text: "Enter a key phrase from your desired line."
                size_hint: (None, None)
                size: (Window.width, 0.05*Window.height)
            ScrollView:
                id: searchResultsScroll
                size_hint: (None, None)
                size: (Window.width, 0.8*Window.height)
                pos_hint: {'top': 0.8}
                GridLayout:
                    id: searchResultsLayout
                    size_hint: (None, None)
                    width: Window.width
                    cols: 1
                    pos_hint: {'top': 0.8}

        
